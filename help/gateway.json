{"gateway":{"name":"help","version":"1.0.0","description":"This is the first microgateway app","configurations":[{"name":"kafkaConfig","type":"github.com/TIBCOSoftware/flogo-contrib/config/kafkaConfig","description":"Configuration for kafka cluster","settings":{"brokers":["localhost:9092","localhost:9093"],"userName":"admin","password":"admin"}}],"triggers":[{"name":"OrdersTrigger","description":"The trigger on 'orders' topic","type":"github.com/TIBCOSoftware/flogo-contrib/trigger/kafkaConsumer","input":{"topic":"orders","config":"${configurations.kafkaConfig}"},"output":{"content":{"type":"json"}}}],"event_handlers":[{"name":"OrderSuccessHandler","description":"Handle the order processing","input":{"time-span":{"value":"minute","type":"string"},"message":{"value":"${trigger.content}","type":"json"},"limit":{"value":1001,"type":"integer"}},"actions":[{"id":1,"name":"log","description":"Log the inbound request","type":"github.com/TIBCOSoftware/flogo-contrib/activity/Log","action_input":{"message":{"value":"${inputs.message}","type":"string"}}},{"id":2,"name":"limit","description":"Limit the traffic to endpoint","type":"github.com/TIBCOSoftware/flogo-contrib/activity/RateLimiter","action_input":{"operation":{"value":"POST http: //localhost:9090/users","type":"string"},"limit":{"value":"${inputs.limit}","type":"integer"},"time-span":{"value":"${inputs.time-span}","type":"string"}},"action_output":{"operation":{"type":"string"},"throttled":{"type":"boolean"},"error":{"type":"error"}}},{"id":3,"name":"invoke","description":"Invoke the endpoint","type":"github.com/TIBCOSoftware/flogo-contrib/activity/RESTInvoke","action_input":{"operation":{"value":"${action.limit.operation}","type":"string"},"content":{"value":"${inputs.message}","type":"json"}},"action_output":{"status":{"type":"string"},"message":{"type":"json"},"error":{"type":"error"}}},{"id":4,"name":"error","description":"Error handling","type":"github.com/TIBCOSoftware/flogo-contrib/activity/error","action_input":{"message":{"value":"No more than ${inputs.limit} requests allowed per ${inputs.time-span}","type":"string"}}}],"links":[{"from":"limit","to":"error","if":"${limit.throttled} == true"},{"from":"limit","to":"invoke","if":"${limit.throttled} == false"}]},{"name":"OrderErrorHandler","description":"Handle the order error processing","reference":"github.com/TIBCOSoftware/mashling/flows/ConsoleErrorHandler/flow.json","input":{"message":{"value":"${trigger.content}","type":"json"}},"actions":null}],"event_links":[{"trigger":"OrdersTrigger","success_paths":[{"condition":"${trigger.content.Country == \"USA\"}","handler":"OrderSuccessHandler"}],"error_paths":[{"condition":"${trigger.content.Country == undefined}","handler":"OrderErrorHandler"}]}]}}